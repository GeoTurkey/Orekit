# General simulation parameters
simulation       = {
    output_base_name = "classical-single-geo";
    inertial_frame   = "EME2000";
    earth_frame      = "ITRF2008 with tides";
    start_date       = 2011-10-23T00:00:00.000;
    end_date         = 2011-12-31T23:59:59.999;
    cycle_duration   = 14.0;
    rolling_cycles   = 3;
    ground_location  = {
        latitude     = 49.85;
        longitude    =  8.65;
        altitude     =  0.0
    };
    output_step      = 3600.0;
    random_seed      = 156325253;
};

# Array of initial states, there must be exactly one element for each spacecraft
initial_states   = [
    {
        name                   = "Meteosat 9";
        bol_mass               = 1800;
        cycle_number           = 0;
        in_plane_maneuvers     = 0;
        in_plane_total_dV      = 0.0;
        out_of_plane_maneuvers = 0;
        out_of_plane_total_dV  = 0.0;
        mass                   = 1200.0;

        # the following orbit is very rough, it was converted from TLE position/velocity
        # with a simple arithmetic mean on equinoctial parameters over a 2 days propagation
        orbit                  = {
            date               = 2011-10-23T01:47:06.165;
            orbit_type         = EQUINOCTIAL;
            angle_type         = MEAN;
            a                  = 42168449.623;
            ex                 = -6.66e-5;
            ey                 =  2.17e-5;
            hx                 =  0.0027459;
            hy                 = -0.0015674;
            longitude_argument =  0.153225665;
        }

    }
];

# Array of scenario components, each scenario component specifies to which spacecrafts it applies
scenario         = [
    {
        component           = ORBIT_DETERMINATION;
        managed_spacecrafts = [ "Meteosat 9" ];
        orbit_type          = EQUINOCTIAL;
        angle_type          = MEAN;
        small               = 1.0e-12;  # this parameter is used to check covariance matrix semi-positiveness
        covariance          = [
            [  1555.13,   -5.831e-5,   3.503e-5,   1.385e-8,  -9.510e-10,  6.554e-5  ],
            [ -5.831e-5,   2.186e-12, -1.313e-12, -5.196e-16,  3.566e-17, -2.458e-12 ],
            [  3.503e-5,  -1.313e-12,  7.893e-13,  3.122e-16, -2.142e-17,  1.476e-12 ],
            [  1.385e-8,  -5.196e-16,  3.122e-16,  1.234e-19, -8.474e-21,  5.841e-16 ],
            [ -9.510e-10,  3.566e-17, -2.142e-17, -8.474e-21,  5.816e-22, -4.008e-17 ],
            [  6.554e-5,  -2.458e-12,  1.476e-12,  5.841e-16, -4.008e-17,  2.762e-12 ]
        ];
    },
    {
        component             = CONTROL_LOOP;
        controlled_spacecraft = "Meteosat 9";  # note: control loop components control only ONE spacecraft each
        first_cycle           = 1;
        last_cycle            = 999;
        max_eval              = 1000;
        optimizer             = {
            method     = CMA_ES;
            nb_points  = 5;
        };
        propagator  = {
            method               = "numerical";
            position_tolerance   = 100.0;
            gravity_field_degree = 10;
            gravity_field_order  = 10;
        };
        controls    = [
            {
                scale         = 0.01;
                type          = LONGITUDE_MARGINS;
                name          = "longitude margin";
                time_horizon  = 1000000;
                east_boundary = 19.9;
                west_boundary = 20.1;
                target        =  0.0;
                sampling      = 3600.0;
            },
            {
                scale         = 1.0e-4;
                type          = ECCENTRICITY_CIRCLE;
                name          = "eccentricity circle";
                time_horizon  = 1000000;
                center_x      = 0.0;
                center_y      = 0.0;
                radius        = 1.0e-4;
                sampling      = 3600.0;
            }
        ];
        maneuvers   = [
            {
                in_plane     = true;
                name         = "E/W-1";
                direction    = [ 1.0, 0.0, 0.0 ];
                isp_curve    = [ [ 315, 0.0 ], [ 300, 600.0 ] ];
                dv_min       = -0.1;
                dv_max       =  0.1;
                nominal_date = 172800;
                dt_min       = -86400;
                dt_max       =  86400;
            },
            {
                in_plane     = true;
                name         = "E/W-2";
                direction    = [ 1.0, 0.0, 0.0 ];
                isp_curve    = [ [ 315, 0.0 ], [ 300, 600.0 ] ];
                dv_min       = -0.1;
                dv_max       =  0.1;
                nominal_date = 216000;
                dt_min       = -86400;
                dt_max       =  86400;
            }
        ];
    },
    {
        component           = MANEUVER_DATE_ERROR;
        managed_spacecrafts = [ "Meteosat 9" ];
        in_plane            = true;
        out_of_plane        = true;
        standard_deviation  = 60.0;
    },
    {
        component           = MANEUVER_MAGNITUDE_ERROR;
        managed_spacecrafts = [ "Meteosat 9" ];
        in_plane            = true;
        out_of_plane        = true;
        standard_deviation  = 0.001;
    },
    {
        component           = PROPAGATION;
        managed_spacecrafts = [ "Meteosat 9" ];
        propagator          = {
            method                 = "numerical";
            position_tolerance     = 100.0;
            gravity_field_degree   = 10;
            gravity_field_order    = 10;
            cross_section          = 20.0;
            absorption_coefficient = 1.5;
            reflection_coefficient = 2.0;
        }
    }
];

monitoring = [

    # the following identifiers correspond to available monitorable values for a single spacecraft
    IN_PLANE_MANEUVER_NUMBER,
    IN_PLANE_MANEUVER_CYCLE_DV,
    IN_PLANE_MANEUVER_TOTAL_DV,
    OUT_OF_PLANE_MANEUVER_NUMBER,
    OUT_OF_PLANE_MANEUVER_CYCLE_DV,
    OUT_OF_PLANE_MANEUVER_TOTAL_DV,
    SPACECRAFT_MASS,
    POSITION_EME2000,
    VELOCITY_EME2000,
    POSITION_ITRF,
    VELOCITY_ITRF,
    LATITUDE,
    LONGITUDE,
    ALTITUDE,
    SEMI_MAJOR_AXIS,
    ECCENTRICITY,
    INCLINATION,
    CIRCULAR_ECCENTRICITY_VECTOR,
    EQUINOCTIAL_ECCENTRICITY_VECTOR,
    EQUINOCTIAL_INCLINATION_VECTOR,
    SOLAR_TIME_AT_ASCENDING_NODE,
    SOLAR_TIME_AT_DESCENDING_NODE,
    CYCLES_NUMBER,

    # the following identifiers correspond to available monitorable values for a spacecrafts pair
    DISTANCE,
    ANGULAR_SEPARATION_FROM_EARTH_CENTER,
    ANGULAR_SEPARATION_FROM_REFERENCE_LOCATION,
    RELATIVE_POSITION_EME2000,
    RELATIVE_VELOCITY_EME2000,
    RELATIVE_POSITION_ITRF,
    RELATIVE_VELOCITY_ITRF,
    SEMI_MAJOR_AXIS_DIFFERENCE,
    ECCENTRICITY_DIFFERENCE,
    INCLINATION_DIFFERENCE,
    RELATIVE_CIRCULAR_ECCENTRICITY_VECTOR,
    RELATIVE_EQUINOCTIAL_ECCENTRICITY_VECTOR,
    RELATIVE_EQUINOCTIAL_INCLINATION_VECTOR

]
